<h1>Products</h1>

<kendo-grid [kendoGridInCellEditing]="createFormGroup"
            [editService]="gridService"
            [data]="gridView"
            [height]="533"
            [pageSize]="gridState.take" [skip]="gridState.skip" [sort]="gridState.sort" [filter]="gridState.filter"
            [pageable]="true" [sortable]="true" [filterable]="true"
            (dataStateChange)="onStateChange($event)">
    <ng-template kendoGridToolbarTemplate>
        <button kendoGridAddCommand>Add new</button>
        <button class="k-button" [disabled]="!gridService.hasChanges()" (click)="gridService.saveChanges()"
                [class.k-primary]="gridService.hasChanges()">
            Save Changes
        </button>
        <button class="k-button" [disabled]="!gridService.hasChanges()" (click)="gridService.cancelChanges()">Cancel Changes</button>
    </ng-template>
    <kendo-grid-column field="ProductName" title="Product Name"></kendo-grid-column>
    <kendo-grid-column field="UnitPrice" editor="numeric" filter="numeric" title="Price"></kendo-grid-column>
    <kendo-grid-column field="Discontinued" editor="boolean" filter="boolean" title="Discontinued"></kendo-grid-column>
    <kendo-grid-column field="UnitsInStock" editor="numeric" filter="numeric" title="Units In Stock"></kendo-grid-column>
    <kendo-grid-column field="CategoryId" title="Category">
        <ng-template kendoGridCellTemplate let-dataItem>{{category(dataItem.CategoryId)?.Name}}</ng-template>
        <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
            <kendo-dropdownlist [data]="categories" textField="Name" valueField="Id"
                                [valuePrimitive]="true" [formControl]="formGroup.get('CategoryId')">
            </kendo-dropdownlist>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-command-column width="220">
        <ng-template kendoGridCellTemplate let-isNew="isNew">
            <button kendoGridRemoveCommand>Remove</button>
            <button kendoGridSaveCommand [disabled]="formGroup?.invalid">Add</button>
            <button kendoGridCancelCommand>Discard</button>
        </ng-template>
    </kendo-grid-command-column>
</kendo-grid>
